(function(){"use strict";var e={47:function(e,t,n){var i=n(963),o=n(252);const l={id:"app",class:"small-container"},s=(0,o._)("h1",null,"Работники",-1);function a(e,t,n,i,a,r){const c=(0,o.up)("emp-form"),m=(0,o.up)("employee-table");return(0,o.wg)(),(0,o.iD)("div",l,[s,(0,o.Wm)(c,{"onAdd:emp":r.addEmployee},null,8,["onAdd:emp"]),(0,o.Wm)(m,{employees:a.employees,"onDelete:employee":r.deleteEmployee,"onEdit:employee":r.editEmployee},null,8,["employees","onDelete:employee","onEdit:employee"])])}var r=n(577);const c=e=>((0,o.dD)("data-v-19f9d895"),e=e(),(0,o.Cn)(),e),m={id:"employee-table"},u={key:0,class:"empty-table"},p={key:1},d=c((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Имя сотрудника"),(0,o._)("th",null,"Почта сотрудника"),(0,o._)("th",null,"Действия")])],-1))),y={key:0},h=["onUpdate:modelValue"],f={key:1},g={key:2},b=["onUpdate:modelValue"],v={key:3},w={key:4},k=["onClick"],E=["onClick"],_={key:5},D=["onClick"],j=["onClick"];function S(e,t,n,l,s,a){return(0,o.wg)(),(0,o.iD)("div",m,[n.employees.length<1?((0,o.wg)(),(0,o.iD)("p",u,"Нет работников")):((0,o.wg)(),(0,o.iD)("table",p,[d,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.employees,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[s.editing===t.id?((0,o.wg)(),(0,o.iD)("td",y,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>t.name=e},null,8,h),[[i.nr,t.name]])])):((0,o.wg)(),(0,o.iD)("td",f,(0,r.zw)(t.name),1)),s.editing===t.id?((0,o.wg)(),(0,o.iD)("td",g,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>t.email=e},null,8,b),[[i.nr,t.email]])])):((0,o.wg)(),(0,o.iD)("td",v,(0,r.zw)(t.email),1)),s.editing===t.id?((0,o.wg)(),(0,o.iD)("td",w,[(0,o._)("button",{onClick:e=>a.editEmployee(t)},"Сохранить",8,k),(0,o._)("button",{class:"muted-button",onClick:e=>a.cancelEdit(t)}," Отмена ",8,E)])):((0,o.wg)(),(0,o.iD)("td",_,[(0,o._)("button",{onClick:e=>a.editMode(t)},"Изменить",8,D),(0,o._)("button",{onClick:n=>e.$emit("delete:employee",t.id)}," Удалить ",8,j)]))])))),128))])]))])}var O={name:"employee-table",props:{employees:Array},data(){return{editing:null}},methods:{editMode(e){this.cachedEmployee=Object.assign({},e),this.editing=e.id},cancelEdit(e){Object.assign(e,this.cachedEmployee),this.editing=null},editEmployee(e){""!==e.name&&""!==e.email&&(this.$emit("edit:emp",e.id,e),this.editing=null)}}},C=n(744);const U=(0,C.Z)(O,[["render",S],["__scopeId","data-v-19f9d895"]]);var x=U;const T={id:"emp-form"},F=(0,o._)("label",null,"Имя сотрудника",-1),V=(0,o._)("label",null,"Почта сотрудника",-1),$={key:0,class:"error-message"},N={key:1,class:"success-message"},P=(0,o._)("button",null,"Добавить сотрудника",-1);function A(e,t,n,l,s,a){return(0,o.wg)(),(0,o.iD)("div",T,[(0,o._)("form",{onSubmit:t[6]||(t[6]=(0,i.iM)(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]))},[F,(0,o.wy)((0,o._)("input",{ref:"first","onUpdate:modelValue":t[0]||(t[0]=e=>s.emp.name=e),type:"text",class:(0,r.C_)({"has-error":s.submitting&&a.invalidName}),onFocus:t[1]||(t[1]=(...e)=>a.clearStatus&&a.clearStatus(...e)),onKeypress:t[2]||(t[2]=(...e)=>a.clearStatus&&a.clearStatus(...e))},null,34),[[i.nr,s.emp.name]]),V,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.emp.email=e),type:"text",class:(0,r.C_)({"has-error":s.submitting&&a.invalidEmail}),onFocus:t[4]||(t[4]=(...e)=>a.clearStatus&&a.clearStatus(...e)),onKeypress:t[5]||(t[5]=(...e)=>a.clearStatus&&a.clearStatus(...e))},null,34),[[i.nr,s.emp.email]]),s.error&&s.submitting?((0,o.wg)(),(0,o.iD)("p",$," ❗Пожалуйста, заполните все обязательные поля ")):(0,o.kq)("",!0),s.success?((0,o.wg)(),(0,o.iD)("p",N," ✅ Сотрудник успешно добавлен ")):(0,o.kq)("",!0),P],32)])}var K={name:"emp-form",data(){return{submitting:!1,error:!1,success:!1,emp:{name:"",email:""}}},methods:{handleSubmit(){this.submitting=!0,this.clearStatus(),this.invalidName||this.invalidEmail?this.error=!0:(this.$emit("add:emp",this.emp),this.$refs.first.focus(),this.emp={name:"",email:""},this.success=!0,this.error=!1,this.submitting=!1)},clearStatus(){this.success=!1,this.error=!1}},computed:{invalidName(){return""===this.emp.name},invalidEmail(){return""===this.emp.email}}};const M=(0,C.Z)(K,[["render",A]]);var Z=M,q={name:"app",components:{EmployeeTable:x,EmpForm:Z},data(){return{employees:[]}},mounted(){this.getEmployees()},methods:{async getEmployees(){try{const e=await fetch("https://jsonplaceholder.typicode.com/users"),t=await e.json();this.employees=t}catch(e){console.error(e)}},async addEmployee(e){try{const t=await fetch("https://jsonplaceholder.typicode.com/users",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}),n=await t.json();this.employees=[...this.employees,n]}catch(t){console.error(t)}},async deleteEmployee(e){try{await fetch(`https://jsonplaceholder.typicode.com/users/${e}`,{method:"DELETE"}),this.employees=this.employees.filter((t=>t.id!==e))}catch(t){console.error(t)}},async editEmployee(e,t){try{const n=await fetch(`https://jsonplaceholder.typicode.com/users/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});await n.json();this.employees=this.employees.map((e=>{e.id,console.log(t,e)}))}catch(n){console.error(n)}}}};const z=(0,C.Z)(q,[["render",a]]);var J=z;(0,i.ri)(J).mount("#app")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,l){if(!i){var s=1/0;for(m=0;m<e.length;m++){i=e[m][0],o=e[m][1],l=e[m][2];for(var a=!0,r=0;r<i.length;r++)(!1&l||s>=l)&&Object.keys(n.O).every((function(e){return n.O[e](i[r])}))?i.splice(r--,1):(a=!1,l<s&&(s=l));if(a){e.splice(m--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[i,o,l]}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,l,s=i[0],a=i[1],r=i[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(r)var m=r(n)}for(t&&t(i);c<s.length;c++)l=s[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(m)},i=self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(47)}));i=n.O(i)})();
//# sourceMappingURL=app.5576acea.js.map